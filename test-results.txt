============================= test session starts ==============================
platform darwin -- Python 3.13.12, pytest-9.0.2, pluggy-1.6.0 -- /Users/ladislavbartok/Documents/GitHub/iot-meter/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/ladislavbartok/Documents/GitHub/iot-meter
configfile: pytest.ini
plugins: cov-7.0.0
collecting ... collected 68 items

tests/unit/test_device_manager.py::TestHealthEndpoints::test_health PASSED [  1%]
tests/unit/test_device_manager.py::TestHealthEndpoints::test_liveness PASSED [  2%]
tests/unit/test_device_manager.py::TestHealthEndpoints::test_readiness_ok PASSED [  4%]
tests/unit/test_device_manager.py::TestHealthEndpoints::test_readiness_fail PASSED [  5%]
tests/unit/test_device_manager.py::TestGetDevices::test_get_all_devices PASSED [  7%]
tests/unit/test_device_manager.py::TestGetDevices::test_get_devices_filter_by_status PASSED [  8%]
tests/unit/test_device_manager.py::TestGetDevices::test_get_devices_filter_by_type PASSED [ 10%]
tests/unit/test_device_manager.py::TestGetDevices::test_get_devices_empty PASSED [ 11%]
tests/unit/test_device_manager.py::TestGetDevices::test_get_devices_db_error PASSED [ 13%]
tests/unit/test_device_manager.py::TestGetDevice::test_get_device_found PASSED [ 14%]
tests/unit/test_device_manager.py::TestGetDevice::test_get_device_not_found PASSED [ 16%]
tests/unit/test_device_manager.py::TestCreateDevice::test_create_device_success PASSED [ 17%]
tests/unit/test_device_manager.py::TestCreateDevice::test_create_device_minimal PASSED [ 19%]
tests/unit/test_device_manager.py::TestCreateDevice::test_create_device_missing_device_id PASSED [ 20%]
tests/unit/test_device_manager.py::TestCreateDevice::test_create_device_missing_device_name PASSED [ 22%]
tests/unit/test_device_manager.py::TestCreateDevice::test_create_device_duplicate PASSED [ 23%]
tests/unit/test_device_manager.py::TestUpdateDevice::test_update_device_success PASSED [ 25%]
tests/unit/test_device_manager.py::TestUpdateDevice::test_update_device_not_found PASSED [ 26%]
tests/unit/test_device_manager.py::TestUpdateDevice::test_update_device_no_fields PASSED [ 27%]
tests/unit/test_device_manager.py::TestDeleteDevice::test_delete_device_success PASSED [ 29%]
tests/unit/test_device_manager.py::TestDeleteDevice::test_delete_device_not_found PASSED [ 30%]
tests/unit/test_device_manager.py::TestHeartbeat::test_heartbeat_success PASSED [ 32%]
tests/unit/test_device_manager.py::TestHeartbeat::test_heartbeat_not_found PASSED [ 33%]
tests/unit/test_device_manager.py::TestGetMetrics::test_get_metrics_success PASSED [ 35%]
tests/unit/test_device_manager.py::TestGetMetrics::test_get_metrics_with_metric_filter PASSED [ 36%]
tests/unit/test_device_manager.py::TestGetMetrics::test_get_metrics_empty PASSED [ 38%]
tests/unit/test_device_manager.py::TestGetRawData::test_get_raw_data_success PASSED [ 39%]
tests/unit/test_device_manager.py::TestGetRawData::test_get_raw_data_empty PASSED [ 41%]
tests/unit/test_device_manager.py::TestAlerts::test_get_alerts PASSED    [ 42%]
tests/unit/test_device_manager.py::TestAlerts::test_get_alerts_filter_acknowledged PASSED [ 44%]
tests/unit/test_device_manager.py::TestAlerts::test_create_alert PASSED  [ 45%]
tests/unit/test_device_manager.py::TestAlerts::test_acknowledge_alert PASSED [ 47%]
tests/unit/test_device_manager.py::TestAlerts::test_acknowledge_alert_not_found PASSED [ 48%]
tests/unit/test_device_manager.py::TestStats::test_get_stats PASSED      [ 50%]
tests/unit/test_mqtt_collector.py::TestCollectorHealthEndpoints::test_liveness PASSED [ 51%]
tests/unit/test_mqtt_collector.py::TestCollectorHealthEndpoints::test_readiness_no_instance PASSED [ 52%]
tests/unit/test_mqtt_collector.py::TestCollectorHealthEndpoints::test_readiness_not_ready PASSED [ 54%]
tests/unit/test_mqtt_collector.py::TestCollectorHealthEndpoints::test_readiness_ready PASSED [ 55%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorInit::test_init_sets_defaults PASSED [ 57%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorInit::test_is_ready_all_connected PASSED [ 58%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorInit::test_is_ready_mqtt_not_connected PASSED [ 60%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorCallbacks::test_on_connect_success PASSED [ 61%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorCallbacks::test_on_connect_failure PASSED [ 63%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorCallbacks::test_on_disconnect PASSED [ 64%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorMessageProcessing::test_on_message_parses_topic_and_payload PASSED [ 66%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorMessageProcessing::test_on_message_invalid_json PASSED [ 67%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorMessageProcessing::test_store_to_minio PASSED [ 69%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorMessageProcessing::test_store_to_influxdb_numeric_values PASSED [ 70%]
tests/unit/test_mqtt_collector.py::TestMQTTCollectorMessageProcessing::test_store_to_influxdb_no_numeric_values PASSED [ 72%]
tests/unit/test_simulator.py::TestSimulatorHealthEndpoints::test_liveness PASSED [ 73%]
tests/unit/test_simulator.py::TestSimulatorHealthEndpoints::test_readiness_not_ready PASSED [ 75%]
tests/unit/test_simulator.py::TestSimulatorHealthEndpoints::test_readiness_ready PASSED [ 76%]
tests/unit/test_simulator.py::TestSimulatorInit::test_init PASSED        [ 77%]
tests/unit/test_simulator.py::TestTelemetryGeneration::test_generate_temperature PASSED [ 79%]
tests/unit/test_simulator.py::TestTelemetryGeneration::test_generate_humidity PASSED [ 80%]
tests/unit/test_simulator.py::TestTelemetryGeneration::test_generate_power PASSED [ 82%]
tests/unit/test_simulator.py::TestTelemetryGeneration::test_generate_generic PASSED [ 83%]
tests/unit/test_simulator.py::TestPublishTelemetry::test_publish_when_connected PASSED [ 85%]
tests/unit/test_simulator.py::TestPublishTelemetry::test_publish_when_disconnected PASSED [ 86%]
tests/unit/test_simulator.py::TestSimulatorCallbacks::test_on_connect_success PASSED [ 88%]
tests/unit/test_simulator.py::TestSimulatorCallbacks::test_on_connect_failure PASSED [ 89%]
tests/unit/test_simulator.py::TestSimulatorCallbacks::test_on_disconnect PASSED [ 91%]
tests/integration/test_integration.py::TestDeviceCRUDWorkflow::test_full_device_lifecycle PASSED [ 92%]
tests/integration/test_integration.py::TestAlertWorkflow::test_create_and_acknowledge_alert PASSED [ 94%]
tests/integration/test_integration.py::TestMetricsAndRawDataIntegration::test_metrics_returns_structured_data PASSED [ 95%]
tests/integration/test_integration.py::TestMetricsAndRawDataIntegration::test_raw_data_lists_files PASSED [ 97%]
tests/integration/test_integration.py::TestStatsIntegration::test_stats_aggregation PASSED [ 98%]
tests/integration/test_integration.py::TestCollectorMessageProcessingIntegration::test_message_flows_to_both_stores PASSED [100%]

============================== 68 passed in 4.49s ==============================
